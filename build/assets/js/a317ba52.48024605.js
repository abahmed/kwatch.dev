"use strict";(self.webpackChunkkwatch=self.webpackChunkkwatch||[]).push([[8251],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,g=u["".concat(s,".").concat(m)]||u[m]||h[m]||o;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7792:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={slug:"monitor-pvc-usage",title:"Monitor Persistent Volumes in your cluster using kwatch",authors:["abahmed"],tags:["kwatch","kubernetes","monitoring","pvc"],keywords:["kwatch","kubernetes","devops","monitoring","pvc","cluster","usage","persistent","volume"],description:"monitor Persistent Volumes (PV) usage in your cluster using kwatch",pagination_prev:null},i=void 0,l={permalink:"/blog/monitor-pvc-usage",source:"@site/blog/2023-03-14-monitor-pvc-usage.mdx",title:"Monitor Persistent Volumes in your cluster using kwatch",description:"monitor Persistent Volumes (PV) usage in your cluster using kwatch",date:"2023-03-14T00:00:00.000Z",formattedDate:"March 14, 2023",tags:[{label:"kwatch",permalink:"/blog/tags/kwatch"},{label:"kubernetes",permalink:"/blog/tags/kubernetes"},{label:"monitoring",permalink:"/blog/tags/monitoring"},{label:"pvc",permalink:"/blog/tags/pvc"}],readingTime:1.365,hasTruncateMarker:!0,authors:[{name:"Abdelrahman Ahmed",title:"Owner of kwatch",url:"https://github.com/abahmed",imageURL:"https://github.com/abahmed.png",key:"abahmed"}],frontMatter:{slug:"monitor-pvc-usage",title:"Monitor Persistent Volumes in your cluster using kwatch",authors:["abahmed"],tags:["kwatch","kubernetes","monitoring","pvc"],keywords:["kwatch","kubernetes","devops","monitoring","pvc","cluster","usage","persistent","volume"],description:"monitor Persistent Volumes (PV) usage in your cluster using kwatch",pagination_prev:null},nextItem:{title:"kwatch hits +100k downloads \ud83d\ude80",permalink:"/blog/kwatch-hits-100k-downloads"}},s={authorsImageUrls:[void 0]},c=[{value:"Configure kwatch with Teams",id:"configure-kwatch-with-teams",level:3},{value:"Deploy kwatch",id:"deploy-kwatch",level:3}],p={toc:c},u="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In this tutorial, I will help you set up and deploy kwatch on your Kubernetes\ncluster to monitor Persistent Volumes (PV) usage and detect crashes in your running apps."),(0,r.kt)("p",null,"Plus, integrate with Teams to get notified on a channel when volume usage is higher than a threshold."),(0,r.kt)("p",null,"You can integrate with your favorite channel as\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/abahmed/kwatch"},"kwatch")," supports integrations with (Slack,\nDiscord, Email, PagerDuty, Telegram, Rocket Chat, Mattermost, Opsgenie, Matrix,\nDingTalk, FeiShu, And Custom webhook)."),(0,r.kt)("h3",{id:"configure-kwatch-with-teams"},"Configure kwatch with Teams"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 1: Get webhook")),(0,r.kt)("p",null,"First of all, we need to get the webhook URL of the channel you want the notification to be received on it.\n(",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet#create-incoming-webhooks-1"},"Here"),"\nis how to get it)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 2: Get Configuration")),(0,r.kt)("p",null,"Get the configuration template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl  -L https://raw.githubusercontent.com/abahmed/kwatch/v0.8.3/deploy/config.yaml -o config.yaml\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 3: Edit config.yaml with the corresponding config")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Namespace\nmetadata:\n  name: kwatch\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kwatch\n  namespace: kwatch\ndata:\n  config.yaml: |\n    alert:\n      teams:\n        webhook: WEBHOOK_URL\n    pvcMonitor:\n      enabled: true\n      interval: 5\n      threshold: 70\n")),(0,r.kt)("p",null,"For more configurations check ",(0,r.kt)("a",{parentName:"p",href:"https://kwatch.dev/docs/pvc-monitor-configuration"},"here")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 4: Apply Configuration")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f config.yaml\n")),(0,r.kt)("h3",{id:"deploy-kwatch"},"Deploy kwatch"),(0,r.kt)("p",null,"Deploy kwatch on your cluster with one command"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/abahmed/kwatch/v0.8.3/deploy/deploy.yaml\n")),(0,r.kt)("p",null,"After deploying you will get notified on the channel that kwatch has started\nsuccessfully. Now, kwatch is monitoring your volumes and apps!"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"./../../img/blog/kwatch-pvc/1.png"})),(0,r.kt)("p",null,"Here is an example of kwatch messages when volume usage exceeds the threshold"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"./../../img/blog/kwatch-pvc/2.png"})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"We are happy to hear feedback from you and if you have any request, or suggestion don't hesitate to ping us on our channels (",(0,r.kt)("a",{parentName:"em",href:"https://discord.gg/kzJszdKmJ7"},"Discord"),", ",(0,r.kt)("a",{parentName:"em",href:"https://github.com/abahmed/kwatch"},"GitHub"),")")))}h.isMDXComponent=!0}}]);