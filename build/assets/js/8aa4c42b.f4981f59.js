"use strict";(self.webpackChunkkwatch=self.webpackChunkkwatch||[]).push([[5960],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(a),g=r,h=u["".concat(c,".").concat(g)]||u[g]||d[g]||i;return a?n.createElement(h,o(o({ref:t},p),{},{components:a})):n.createElement(h,o({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=g;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},9967:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=a(7462),r=(a(7294),a(3905));const i={slug:"detect-crashes-in-your-cluster-using-kwatch-and-pagerduty",title:"Detect crashes in your Kubernetes cluster using kwatch and PagerDuty",authors:["amgadramses"],tags:["kwatch","kubernetes","devops","monitoring","pagerduty"],keywords:["kwatch","kubernetes","devops","monitoring","pagerduty","cluster","crash"],description:"monitor all changes in your Kubernetes cluster & detects crashes in your running apps in real time with PagerDuty",pagination_prev:null},o=void 0,s={permalink:"/blog/detect-crashes-in-your-cluster-using-kwatch-and-pagerduty",source:"@site/blog/2022-01-22-kwatch-pagerduty.mdx",title:"Detect crashes in your Kubernetes cluster using kwatch and PagerDuty",description:"monitor all changes in your Kubernetes cluster & detects crashes in your running apps in real time with PagerDuty",date:"2022-01-22T00:00:00.000Z",formattedDate:"January 22, 2022",tags:[{label:"kwatch",permalink:"/blog/tags/kwatch"},{label:"kubernetes",permalink:"/blog/tags/kubernetes"},{label:"devops",permalink:"/blog/tags/devops"},{label:"monitoring",permalink:"/blog/tags/monitoring"},{label:"pagerduty",permalink:"/blog/tags/pagerduty"}],readingTime:.945,hasTruncateMarker:!0,authors:[{name:"Amgad Ramses",title:"Maintainer of kwatch",url:"https://github.com/amgadramses",imageURL:"https://github.com/amgadramses.png",key:"amgadramses"}],frontMatter:{slug:"detect-crashes-in-your-cluster-using-kwatch-and-pagerduty",title:"Detect crashes in your Kubernetes cluster using kwatch and PagerDuty",authors:["amgadramses"],tags:["kwatch","kubernetes","devops","monitoring","pagerduty"],keywords:["kwatch","kubernetes","devops","monitoring","pagerduty","cluster","crash"],description:"monitor all changes in your Kubernetes cluster & detects crashes in your running apps in real time with PagerDuty",pagination_prev:null},prevItem:{title:"v0.4.0 is released!",permalink:"/blog/release-v0-4-0"},nextItem:{title:"Detect crashes in your Kubernetes cluster using kwatch and Slack",permalink:"/blog/detect-crashes-in-your-cluster-using-kwatch-and-slack"}},c={authorsImageUrls:[void 0]},l=[{value:"Configure PagerDuty",id:"configure-pagerduty",level:3},{value:"Step 1: Create a new service",id:"step-1-create-a-new-service",level:4},{value:"Step 2: Give your service a Name and a Description",id:"step-2-give-your-service-a-name-and-a-description",level:4},{value:"Step 3: Add an Escalation Policy",id:"step-3-add-an-escalation-policy",level:4},{value:"Step 4: Make sure to add the Events API V2 Integration",id:"step-4-make-sure-to-add-the-events-api-v2-integration",level:4},{value:"Step 5: Navigate to your service and copy the Integration Key",id:"step-5-navigate-to-your-service-and-copy-the-integration-key",level:4},{value:"Configure kwatch",id:"configure-kwatch",level:3},{value:"Step 1: Get the configuration template",id:"step-1-get-the-configuration-template",level:4},{value:"Step 2: Edit <code>config.yaml</code> file and add the Integration Key",id:"step-2-edit-configyaml-file-and-add-the-integration-key",level:4},{value:"Step 3: Apply the configuration",id:"step-3-apply-the-configuration",level:4},{value:"Deploy kwatch",id:"deploy-kwatch",level:3}],p={toc:l},u="wrapper";function d(e){let{components:t,...i}=e;return(0,r.kt)(u,(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In this article you will learn how to setup and deploy kwatch in your Kubernetes (K8s) cluster to monitor and receive real time crash alerts through PagerDuty"),(0,r.kt)("h3",{id:"configure-pagerduty"},"Configure PagerDuty"),(0,r.kt)("h4",{id:"step-1-create-a-new-service"},"Step 1: Create a new service"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1",src:a(1082).Z,width:"2878",height:"410"})),(0,r.kt)("h4",{id:"step-2-give-your-service-a-name-and-a-description"},"Step 2: Give your service a Name and a Description"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"2",src:a(4902).Z,width:"1644",height:"1226"})),(0,r.kt)("h4",{id:"step-3-add-an-escalation-policy"},"Step 3: Add an ",(0,r.kt)("a",{parentName:"h4",href:"https://support.pagerduty.com/docs/escalation-policies"},"Escalation Policy")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"3",src:a(8467).Z,width:"1660",height:"1124"})),(0,r.kt)("h4",{id:"step-4-make-sure-to-add-the-events-api-v2-integration"},"Step 4: Make sure to add the ",(0,r.kt)("a",{parentName:"h4",href:"https://developer.pagerduty.com/api-reference/b3A6Mjc0ODI2Nw-send-an-event-to-pager-duty"},"Events API V2")," Integration"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"4",src:a(9414).Z,width:"1658",height:"1038"})),(0,r.kt)("h4",{id:"step-5-navigate-to-your-service-and-copy-the-integration-key"},"Step 5: Navigate to your service and copy the Integration Key"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"5",src:a(4959).Z,width:"2082",height:"1538"})),(0,r.kt)("h3",{id:"configure-kwatch"},"Configure kwatch"),(0,r.kt)("h4",{id:"step-1-get-the-configuration-template"},"Step 1: Get the configuration template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl  -L https://raw.githubusercontent.com/abahmed/kwatch/v0.3.0/deploy/config.yaml -o config.yaml\n")),(0,r.kt)("h4",{id:"step-2-edit-configyaml-file-and-add-the-integration-key"},"Step 2: Edit ",(0,r.kt)("inlineCode",{parentName:"h4"},"config.yaml")," file and add the Integration Key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"apiVersion: v1\nkind: Namespace\nmetadata:\n  name: kwatch\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kwatch\n  namespace: kwatch\ndata:\n  config.yaml: |\n    alert:\n      pagerduty:\n        integrationKey: <integration_key>\n")),(0,r.kt)("h4",{id:"step-3-apply-the-configuration"},"Step 3: Apply the configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f config.yaml\n")),(0,r.kt)("h3",{id:"deploy-kwatch"},"Deploy kwatch"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f https://raw.githubusercontent.com/abahmed/kwatch/v0.3.0/deploy/deploy.yaml\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"You will now start receiving PagerDuty alerts whenever there is a pod crash in your Kubernetes (K8s) cluster!"),"\n",(0,r.kt)("img",{alt:"6",src:a(5222).Z,width:"1241",height:"800"})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"If you like kwatch, give it a star on ",(0,r.kt)("a",{parentName:"em",href:"https://github.com/abahmed/kwatch"},"GitHub")),"!"))}d.isMDXComponent=!0},1082:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/1-9c4333cc0fafdb8ca4472962c4d95aab.png"},4902:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2-af79a232a713dac5eb89805c632fa059.png"},8467:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/3-4041d86c0629fc38393f3d5399475385.png"},9414:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/4-0d8dceae2710950fba3658503bbf50a5.png"},4959:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/5-42b730404406915a6353f61374413d05.png"},5222:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/6-42a7cb133675230bad49be38bb1afb35.png"}}]);